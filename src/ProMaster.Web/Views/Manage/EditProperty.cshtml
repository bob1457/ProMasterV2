@model ProMaster.Core.Property.ViewModels.DisplayPropertyViewModel

@{
    ViewBag.Title = "Edit Property";
}


<div class="content-wrapper">

  <aside> 
    <!-- Left Panel/Column -->
      <div id="left">
        
         
      	    <div class="profile_logo">
        	    <img src="@Url.Content(Model.PropertyImageUrl)" alt="" title="@Model.PropertyName" />            
            </div>

             <div class="profile_caption metro">
        	    <h3>@Html.DisplayFor(model => model.PropertyName)</h3>
        	    <br />

                <span>
            	    <div class="display-label">
                       Property Added on:
                    </div><br />
                    <div class="display-field">
                        @Html.DisplayFor(model => model.CreationDate)
                    </div><br />

                    <div class="display-label">
                        Last Updated on:
                    </div><br />
                    <div class="display-field">
                        @Html.DisplayFor(model => model.UpdateDate)
                    </div><br />
                </span>

            @using (Html.BeginForm("UpdateImg", "Manage", new {@id = @Model.PropertyId}, FormMethod.Post, new { @encType = "multipart/form-data" }))
            {
               <div class="avatar_update">
                   
                   <a id="show" href="">Change Image</a><a id="cancel" href="#" >Cancel</a>
                   <br/>
                   <div id="image" style="margin-top: 1em;">                       
                           <h6>Select image:</h6> 
                           
                           @FileUpload.GetHtml(initialNumberOfFiles: 1, allowMoreFilesToBeAdded: false, addText: "", uploadText: "Update")
                           
                   </div>
               </div>            
            } 
                 

             </div>

      <p></p>
      
          <div class="side_title_caption metro">
              <p></p>
              <span><i class="icon-new-tab rss_color"></i> Quick Access</span>
              <div class="side-widget">
                  <a href="@Url.Content("~/Tools/Messaging")" title="Messaging"><div class="tile amarelo" id="p1"><span><i class="fa fa-envelope-o"></i></span><br /><br /> Messaging</div></a>
                  <a href="@Url.Content("~/Tools/Calendar")" title="Calendar"><div class="tile vermelho" id="p2"><span><i class="fa fa-calendar-o"></i></span><br /><br /> Calendar</div></a>
                  <a href="@Url.Content("~/Tools/Resources")" title="Resources"><div class="tile metro_dark_blue" id="p3"><span><i class="fa fa-user"></i></span><br /><br /> Resources</div></a>
                  <a href="@Url.Content("~/Tools/DocTool")" title="Document Tools"><div class="tile purple" id="p4"><span><i class="icon-clipboard-2"></i></span><br /><br /> Document Tools</div></a>
              </div>

          </div>     


      </div>      
  
      
  </aside><!-- End of aside -->

  <div class="main metro">

    <div id="add_edit_panel">
        <h3><i class="fa fa-th"></i> &nbsp; EDIT PROPERTY        	
          <span>Please fill/Update all required fields and click "Save".</span>
        </h3>
                <!-- <fieldset class="edit"> 
                <legend><span></span></legend> --><!-- </fieldset>  -->
                
                
                @using (Html.BeginForm("EditProperty", "Manage", FormMethod.Post, new { @encType = "multipart/form-data" }))
                { 
                    <div class="edit_field">
                         <fieldset>
                            <legend><span><i class="fa fa-info-circle"></i> Basic Information</span></legend>
                            
                                           
                                <div class="display-label">
                                    <span class="grey-font">Property ID:</span>
                                </div>
                                <div class="display-field" style="padding-top: 5px;">
                                    <span class=" grey-font">
    @Html.DisplayFor(model => model.PropertyId)</span>
                                </div>
                                <br /><br />
                                    <br />
                                <div class="display-label">
                                    Name/Alias:
                                </div>
                                <div class="display-field">
                                    @Html.TextBoxFor(model => model.PropertyName, new { autofocus = "" })
                                    @Html.ValidationMessageFor(model => model.PropertyName)
                                </div> 
                                <br />
                                <div class="display-label">
                                    Description:
                                </div>
                                <div class="display-field">
                                    @Html.TextAreaFor(model => model.PropertyDesc)                                
                                </div>
                                <br />
                                <div class="display-label">
                                    Built Year:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyBuildYear)
                                   @Html.ValidationMessageFor(model => model.PropertyBuildYear)
                                </div>
                                <br />
                                <div class="display-label">
                                    Is Active?
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.IsActive)                              
                                </div>
                                <br />
                                <div class="display-label">
                                    Property Type:
                                </div>
                                <div class="display-field">
                                    @Html.DropDownListFor(model => model.PropertyTypeId, Model.PropertyTypeList)
                                </div>
                                <br />
                             <!-- -->
                             <div class="display-label">
                                 <a id="overwrite" href="#"> Update Status</a><a id="cancel2" href="#"> Cancel</a>
                             </div>
                             
                             

                             <div class="display-field" style="vertical-align:middle; margin-top:9px;">
                                 <span style="font-size:0.9em;">Current Status: <em>@Html.DisplayFor(model => model.RentStatus)</em></span>
                             </div>

                             <div id="status">
                                 <div class="display-label">
                                     Rental Status:
                                 </div>
                                 <div class="display-field">
                                     @Html.DropDownListFor(model => model.RentalStatusId, Model.PropertyStatus)
                                 </div>
                             </div> 
                               
                            </fieldset>
                                <br />
                            <div id="msg"></div>
                                <!-- Address 
                                <hr class="line-separator"></hr>-->
                        <fieldset>
                            <legend><span><i class=" icon-address-book"></i> Address</span></legend>

                                <div class="display-label">
                                    Suite Number:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressSuiteNumber)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressSuiteNumber)
                                </div>
                                <br />
                                <div class="display-label">
                                    Street Number:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressStreetNumber)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressStreetNumber)
                                </div>
                                <br />
                                <div class="display-label">
                                    Street Name:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressStreetName)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressStreetName)
                                </div>
                                <br />
                                <div class="display-label">
                                    Cityr:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressCity)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressCity)
                                </div>
                                <br />
                                <div class="display-label">
                                    Province/State:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressProvState)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressProvState)
                                </div>
                                <br />                                
                                <div class="display-label">
                                    Post/Zip Code:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressPostZipCode)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressPostZipCode)
                                </div>
                                <br />
                                <div class="display-label">
                                    Country:
                                </div>
                                <div class="display-field">
                                   @Html.EditorFor(model => model.PropertyAddressCountry)
                                   @Html.ValidationMessageFor(model => model.PropertyAddressCountry)
                                </div>
                        </fieldset>
                                <br />
                                <br />
                                <!-- Features  
                                <hr class="line-separator"></hr>-->

                        <fieldset>
                            <legend><span><i class="fa fa-indent"></i> Features</span></legend>
                               
                                    <ul class="facilities">
                                        
                                            <li>No. of Bedrm: &nbsp;  <span>@Html.TextBoxFor(model => model.NumberOfBedrooms, new {id="bm" })</span></li>
                                            <li>No. of Bathrm: &nbsp; @Html.TextBoxFor(model => model.NumberOfBathrooms)</li>
                                            <li>No. of Stories: &nbsp; @Html.TextBoxFor(model => model.NumberOfFloors)</li>
                                            <li>No. of Parking: &nbsp; @Html.TextBoxFor(model => model.NumberOfParkings)</li>
                                            <li>Total Area(sqft): &nbsp; @Html.TextBoxFor(model => model.TotalLivingArea)</li>
                                            <li>Basement Available.: &nbsp; @Html.EditorFor(model => model.BasementAvailable)</li>
                                        
                                    </ul>
                        </fieldset>
                               <br /><br />
                               <!-- Features  
                               <hr class="line-separator"></hr>-->
                        <fieldset><legend><span><i class="fa fa-cog"></i> Facilities</span></legend>
                                <ul class="features">
                                        
                                            <li>Stove:&nbsp; @Html.EditorFor(model=>model.Stove)</li>
                                            <li>Refrigerator: &nbsp;@Html.EditorFor(model => model.Refrigerator)</li>
                                            <li>Laundray: &nbsp;@Html.EditorFor(model => model.Laundry)</li>
                                            <li>Diswasher: &nbsp;@Html.EditorFor(model => model.Dishwasher)</li>
                                            <li>Blinds: &nbsp;@Html.EditorFor(model => model.Blinds)</li>
                                            <li>TV/Internet&nbsp; @Html.EditorFor(model => model.TVInternet)</li>
                                            <li>Furnture: &nbsp;@Html.EditorFor(model => model.Furniture)</li>
                                            <li>Alarm: &nbsp;@Html.EditorFor(model => model.FireAlarm)</li>
                                            <li>Common Ar.: &nbsp;@Html.EditorFor(model => model.CommonFacility)</li>
                                </ul>
                                <div class="notes">
                                     <div class="display-label"> 
                                        Others and Notes: &nbsp; 
                                     </div><br />
                                     <div class="display-field">
                                         @Html.TextAreaFor(model => model.Others)
                                     </div>
                                </div>
                        </fieldset>

                        </div> 
                    
                    <div class="right-aligned"><input type="submit" value="Save" /></div>
                } 
                    
        </div>   
  
  </div><!-- End of main-->



</div><!-- End of content-wrapper -->

<!-- The confirmation dialog content -->
<div id="update-dialog" title="Confirmation" style="display:none">
    <span class="dialog-icon"><i class="fa fa-exclamation-triangle"></i></span> 
    <span style="float: right; width: 80%;">
        Are you sure to manually update rental status?<br /><br />
        It may cause inconsistency in the system. The best way is to follow the system workflow and the status will be updated automatically!
    </span>
</div>
<br />

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}


<script type="text/javascript">
    $(function () {
        $(".datepicker").datepicker();
    });
    
</script>

<script type="text/javascript">
    $("#cancel").hide();
    $("#image").hide();

    $("#show").click(function () {
        $("#image").show();
        $("#show").hide();
        $("#cancel").show();

        return false;
    });

    $("#cancel").click(function () {
        $("#image").hide();
        $("#show").show();
        $("#cancel").hide();
    });
</script>

<!-- Manual Status Update Script -->
<script type="text/javascript">
    $(document).ready(function(){
        $("#status").hide();
        $("#cancel2").hide();
    });

    $("#overwrite").click(function () {
        
            //deleteLinkObj = $(this);
            $('#update-dialog').dialog();

            return false;

    });

    $(function () {
        $('#overwrite').click(function () {
            var dialogOpts = {
                autoOpen: false,
                modal: true,
                resizable: false,
                draggable: false,
                title: 'Update Confirmation!',
                width:450,
                buttons: {
                    "Cancel": function () {
                        $(this).dialog("close");
                    },

                    "Continue": function () {
                        @*$.post(deleteLinkObj[0].href, function (data) {
                            if (data == '@Boolean.TrueString') {
                                deleteLinkObj.closest("tr").hide('fast');
                                $("#result").text("The record has been successfully deactivated!");
                            }
                            else {
                                $("#result").text("error occured!");
                            }
                        });*@

                        $("#status").show();

                        $("#overwrite").hide();
                        $("#cancel2").show();

                        $(this).dialog("close");

                    }
                }
            };


            $('#update-dialog').dialog(dialogOpts).dialog('open');
            return false;
        });
    });

</script>

<script type="text/javascript">
    $("#cancel2").click(function () {
        $("#overwrite").show();
        $("#status").hide();
        $("#cancel2").hide();
    });
</script>